#!/bin/bash
#
# Author: Valentin Kuznetsov <vkuznet@gmail.com>
# Description: set-up Trusted X11 forwarding to allow use X11 remotely
#
# Step 1: login to remote host via ssh -Y loginname@hostname
# Step 2: run set_xauth (this script) and it will display proper xauth command
# Step 3: run once xauth command generated by Step 2
# Optional: if Step 3 will fail, add export XAUTHORITY=~/.Xauthority
#
echo $DISPLAY | \
awk '{split($1,a,":"); split(a[2],b,"."); print "xauth -i list $HOSTNAME/unix:"b[1]""}' | \
/bin/sh | awk '{print "xauth add "$0""}'
